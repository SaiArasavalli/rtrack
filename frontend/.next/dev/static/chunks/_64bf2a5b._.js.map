{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/sai/Projects/rtrack/frontend/components/protected-route.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { isAuthenticated } from '@/lib/auth';\n\nexport function ProtectedRoute({ children }: { children: React.ReactNode }) {\n  const router = useRouter();\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    setMounted(true);\n    if (!isAuthenticated()) {\n      router.push('/login');\n    }\n  }, [router]);\n\n  if (!mounted) {\n    return null;\n  }\n\n  if (!isAuthenticated()) {\n    return null;\n  }\n\n  return <>{children}</>;\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMO,SAAS,eAAe,EAAE,QAAQ,EAAiC;;IACxE,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;oCAAC;YACR,WAAW;YACX,IAAI,CAAC,IAAA,iIAAe,KAAI;gBACtB,OAAO,IAAI,CAAC;YACd;QACF;mCAAG;QAAC;KAAO;IAEX,IAAI,CAAC,SAAS;QACZ,OAAO;IACT;IAEA,IAAI,CAAC,IAAA,iIAAe,KAAI;QACtB,OAAO;IACT;IAEA,qBAAO;kBAAG;;AACZ;GApBgB;;QACC,kJAAS;;;KADV","debugId":null}},
    {"offset": {"line": 57, "column": 0}, "map": {"version":3,"sources":["file:///Users/sai/Projects/rtrack/frontend/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { isAuthenticated } from '@/lib/auth';\nimport { ProtectedRoute } from '@/components/protected-route';\nimport { apiClient } from '@/lib/api';\nimport { getCachedAdminStatus } from '@/lib/admin-cache';\nimport { Loader2 } from 'lucide-react';\n\nexport default function Home() {\n  const router = useRouter();\n  const [mounted, setMounted] = useState(false);\n  const [isAdmin, setIsAdmin] = useState<boolean | null>(null);\n  const [checking, setChecking] = useState(true);\n\n  useEffect(() => {\n    setMounted(true);\n    \n    if (!isAuthenticated()) {\n      router.push('/login');\n      return;\n    }\n\n    const checkAdminAndRedirect = async () => {\n      try {\n        // Check cache first\n        const cachedAdminStatus = getCachedAdminStatus();\n        if (cachedAdminStatus !== null) {\n          setIsAdmin(cachedAdminStatus);\n          setChecking(false);\n          // Redirect based on admin status\n          if (cachedAdminStatus) {\n            router.replace('/employees');\n          } else {\n            router.replace('/compliance');\n          }\n          return;\n        }\n\n        // Fetch user info to check admin status\n        const user = await apiClient.getCurrentUser();\n        const adminStatus = user.is_admin;\n        setIsAdmin(adminStatus);\n        setChecking(false);\n        \n        // Redirect based on admin status\n        if (adminStatus) {\n          router.replace('/employees');\n        } else {\n          router.replace('/compliance');\n        }\n      } catch (error) {\n        setChecking(false);\n        // On error, redirect to compliance as default\n        router.replace('/compliance');\n      }\n    };\n\n    checkAdminAndRedirect();\n  }, [router]);\n\n  if (!mounted || !isAuthenticated()) {\n    return null;\n  }\n\n  if (checking) {\n    return (\n      <ProtectedRoute>\n        <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-50/30\">\n          <div className=\"flex flex-col items-center gap-4\">\n            <Loader2 className=\"h-8 w-8 animate-spin text-blue-600\" />\n            <span className=\"text-slate-600\">Loading...</span>\n          </div>\n        </div>\n      </ProtectedRoute>\n    );\n  }\n\n  return null;\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AARA;;;;;;;;AAUe,SAAS;;IACtB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAiB;IACvD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IAEzC,IAAA,0KAAS;0BAAC;YACR,WAAW;YAEX,IAAI,CAAC,IAAA,iIAAe,KAAI;gBACtB,OAAO,IAAI,CAAC;gBACZ;YACF;YAEA,MAAM;wDAAwB;oBAC5B,IAAI;wBACF,oBAAoB;wBACpB,MAAM,oBAAoB,IAAA,gJAAoB;wBAC9C,IAAI,sBAAsB,MAAM;4BAC9B,WAAW;4BACX,YAAY;4BACZ,iCAAiC;4BACjC,IAAI,mBAAmB;gCACrB,OAAO,OAAO,CAAC;4BACjB,OAAO;gCACL,OAAO,OAAO,CAAC;4BACjB;4BACA;wBACF;wBAEA,wCAAwC;wBACxC,MAAM,OAAO,MAAM,0HAAS,CAAC,cAAc;wBAC3C,MAAM,cAAc,KAAK,QAAQ;wBACjC,WAAW;wBACX,YAAY;wBAEZ,iCAAiC;wBACjC,IAAI,aAAa;4BACf,OAAO,OAAO,CAAC;wBACjB,OAAO;4BACL,OAAO,OAAO,CAAC;wBACjB;oBACF,EAAE,OAAO,OAAO;wBACd,YAAY;wBACZ,8CAA8C;wBAC9C,OAAO,OAAO,CAAC;oBACjB;gBACF;;YAEA;QACF;yBAAG;QAAC;KAAO;IAEX,IAAI,CAAC,WAAW,CAAC,IAAA,iIAAe,KAAI;QAClC,OAAO;IACT;IAEA,IAAI,UAAU;QACZ,qBACE,6LAAC,sJAAc;sBACb,cAAA,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,+NAAO;4BAAC,WAAU;;;;;;sCACnB,6LAAC;4BAAK,WAAU;sCAAiB;;;;;;;;;;;;;;;;;;;;;;IAK3C;IAEA,OAAO;AACT;GAtEwB;;QACP,kJAAS;;;KADF","debugId":null}}]
}